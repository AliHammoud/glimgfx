<!DOCTYPE html>

<html>

<head>
  <link rel="icon" href="img/favicon.png">
  <link rel="stylesheet" href="stylesheets/main.css">
  <script src="scripts/bower_components/three.js/three.min.js"></script>
  <script src="scripts/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="scripts/main.js"></script>
  <script src="scripts/ThreeViewport.js"></script>
  
  <!-- Shaders -->
  <script id="vertexShader" 
          type="x-shader/x-vertex" >
  
    varying vec2 vUv;

    void main(){
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);

    }
    
  </script>
  
  <script name="no_effect"
          id="fragmentShader_0"
          type="x-shader/x-fragment" >
  
    varying vec2 vUv;
    uniform sampler2D editImg;

    void main(){
      vec4 myTexture = texture2D(editImg, vUv);
      gl_FragColor = vec4 (myTexture.r, myTexture.g, myTexture.b, 1.0);

    }
    
  </script>
  
  <script name="green_is_blue"
          id="fragmentShader_1"
          type="x-shader/x-fragment" >

    varying vec2 vUv;
    uniform sampler2D editImg;

    void main(){
      vec4 myTexture = texture2D(editImg, vUv);
      gl_FragColor = vec4 (myTexture.r, myTexture.b, myTexture.b, 1.0);

    }
    
  </script>
  
  <script name="invert_colours"
          id="fragmentShader_2"
          type="x-shader/x-fragment" >

    varying vec2 vUv;
    uniform sampler2D editImg;

    void main(){
      vec4 myTexture = texture2D(editImg, vUv);
      
      float rInv = 1.0 - myTexture.r;
      float gInv = 1.0 - myTexture.g;
      float bInv = 1.0 - myTexture.b;
      
      gl_FragColor = vec4 (rInv, gInv, bInv, 1.0);

    }

  </script>
  
  <script name="red_is_blue"
          id="fragmentShader_3"
          type="x-shader/x-fragment" >

    varying vec2 vUv;
    uniform sampler2D editImg;

    void main(){
      vec4 myTexture = texture2D(editImg, vUv);
      gl_FragColor = vec4 (myTexture.b, myTexture.g, myTexture.b, 1.0);

    }

  </script>
  
  <script name="invert_blue"
          id="fragmentShader_4"
          type="x-shader/x-fragment" >

    varying vec2 vUv;
    uniform sampler2D editImg;

    void main(){
      vec4 myTexture = texture2D(editImg, vUv);
      
      float bInv = 1.0 - myTexture.b;

      gl_FragColor = vec4 (myTexture.r, myTexture.g, bInv, 1.0);

    }

  </script>
  
  <!-- End of Shaders -->
</head>

<body>
  <div id="container">

    <div id="imageSection">
      <div id="img_container">
        <div id="dragDropRegion">
          <img src="img/dragdrop.png">
          <div id="dragDropOptions">
            drag and drop an image here
            <br>
            <input id="browseImg" type="file" onchange="uploadImg()">
          </div>
        </div>
      </div>
    </div>
    
    <div id="menuSection">
      
      <button id="test">Menu</button>
      
      <div id="menuContainer">
        <button id="btn_e0">Undo Last Effect</button>
        <button id="btn_e1">Green -> Blue</button>
        <button id="btn_e2">Invert Colours</button>
        <button id="btn_e3">Red -> Blue</button>
        <button id="btn_e4">Invert Blue</button>
        <button id="btn_stack">Stack Effect</button>
        <a id="link_download">Download Result (experimental)</a>
      </div>
      
    </div>
  </div>
  
</body>

</html>